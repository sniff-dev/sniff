{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://sniff.dev/schemas/config.schema.json",
  "title": "Sniff Agent Configuration",
  "description": "Schema for Sniff agent configuration file (config.yml) version 1.0",
  "type": "object",
  "properties": {
    "version": {
      "type": "string",
      "const": "1.0"
    },
    "agents": {
      "minItems": 1,
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "minLength": 1,
            "maxLength": 50,
            "pattern": "^[a-z0-9-]+$"
          },
          "name": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100
          },
          "description": {
            "type": "string",
            "maxLength": 500
          },
          "system_prompt": {
            "type": "string",
            "minLength": 1,
            "maxLength": 50000
          },
          "model": {
            "type": "object",
            "properties": {
              "anthropic": {
                "type": "object",
                "properties": {
                  "name": {
                    "default": "claude-sonnet-4-20250514",
                    "type": "string"
                  },
                  "temperature": {
                    "default": 1,
                    "type": "number",
                    "minimum": 0,
                    "maximum": 1
                  },
                  "max_tokens": {
                    "default": 4096,
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 8192
                  },
                  "top_p": {
                    "type": "number",
                    "minimum": 0,
                    "maximum": 1
                  },
                  "top_k": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 9007199254740991
                  },
                  "stop_sequences": {
                    "maxItems": 10,
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "thinking": {
                    "oneOf": [
                      {
                        "type": "object",
                        "properties": {
                          "type": {
                            "type": "string",
                            "const": "enabled"
                          },
                          "budget_tokens": {
                            "type": "integer",
                            "minimum": 1024,
                            "maximum": 9007199254740991
                          }
                        },
                        "required": ["type", "budget_tokens"],
                        "additionalProperties": false
                      },
                      {
                        "type": "object",
                        "properties": {
                          "type": {
                            "type": "string",
                            "const": "disabled"
                          }
                        },
                        "required": ["type"],
                        "additionalProperties": false
                      }
                    ]
                  },
                  "metadata": {
                    "type": "object",
                    "properties": {
                      "user_id": {
                        "type": "string",
                        "maxLength": 256
                      }
                    },
                    "additionalProperties": false
                  },
                  "tool_choice": {
                    "anyOf": [
                      {
                        "type": "object",
                        "properties": {
                          "type": {
                            "type": "string",
                            "const": "auto"
                          },
                          "disable_parallel_tool_use": {
                            "type": "boolean"
                          }
                        },
                        "required": ["type"],
                        "additionalProperties": false
                      },
                      {
                        "type": "object",
                        "properties": {
                          "type": {
                            "type": "string",
                            "const": "any"
                          },
                          "disable_parallel_tool_use": {
                            "type": "boolean"
                          }
                        },
                        "required": ["type"],
                        "additionalProperties": false
                      },
                      {
                        "type": "object",
                        "properties": {
                          "type": {
                            "type": "string",
                            "const": "tool"
                          },
                          "name": {
                            "type": "string"
                          },
                          "disable_parallel_tool_use": {
                            "type": "boolean"
                          }
                        },
                        "required": ["type", "name"],
                        "additionalProperties": false
                      },
                      {
                        "type": "object",
                        "properties": {
                          "type": {
                            "type": "string",
                            "const": "none"
                          }
                        },
                        "required": ["type"],
                        "additionalProperties": false
                      }
                    ]
                  },
                  "tools": {
                    "type": "array",
                    "items": {
                      "oneOf": [
                        {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "string",
                              "const": "web_search_20250305"
                            },
                            "name": {
                              "type": "string",
                              "const": "web_search"
                            },
                            "max_uses": {
                              "type": "integer",
                              "minimum": 1,
                              "maximum": 9007199254740991
                            },
                            "allowed_domains": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              }
                            },
                            "blocked_domains": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              }
                            },
                            "user_location": {
                              "type": "object",
                              "properties": {
                                "type": {
                                  "type": "string",
                                  "const": "approximate"
                                },
                                "city": {
                                  "type": "string"
                                },
                                "region": {
                                  "type": "string"
                                },
                                "country": {
                                  "type": "string"
                                },
                                "timezone": {
                                  "type": "string"
                                }
                              },
                              "required": ["type"],
                              "additionalProperties": false
                            }
                          },
                          "required": ["type", "name"],
                          "additionalProperties": false
                        },
                        {
                          "type": "object",
                          "properties": {
                            "type": {
                              "type": "string",
                              "const": "web_fetch_20250910"
                            },
                            "name": {
                              "type": "string",
                              "const": "web_fetch"
                            },
                            "max_uses": {
                              "type": "integer",
                              "minimum": 1,
                              "maximum": 9007199254740991
                            },
                            "allowed_domains": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              }
                            },
                            "blocked_domains": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              }
                            },
                            "citations": {
                              "type": "object",
                              "properties": {
                                "enabled": {
                                  "type": "boolean"
                                }
                              },
                              "required": ["enabled"],
                              "additionalProperties": false
                            },
                            "max_content_tokens": {
                              "type": "integer",
                              "minimum": 1,
                              "maximum": 9007199254740991
                            }
                          },
                          "required": ["type", "name"],
                          "additionalProperties": false
                        }
                      ]
                    }
                  },
                  "mcp_servers": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "type": {
                          "type": "string",
                          "const": "url"
                        },
                        "url": {
                          "type": "string",
                          "format": "uri"
                        },
                        "name": {
                          "type": "string",
                          "minLength": 1,
                          "maxLength": 100
                        },
                        "authorization_token": {
                          "type": "string"
                        },
                        "tool_configuration": {
                          "type": "object",
                          "properties": {
                            "enabled": {
                              "type": "boolean"
                            },
                            "allowed_tools": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              }
                            },
                            "disabled_tools": {
                              "type": "array",
                              "items": {
                                "type": "string"
                              }
                            }
                          },
                          "additionalProperties": false
                        }
                      },
                      "required": ["type", "url", "name"],
                      "additionalProperties": false
                    }
                  }
                },
                "required": ["name", "temperature", "max_tokens"],
                "additionalProperties": false
              }
            },
            "required": ["anthropic"],
            "additionalProperties": false
          }
        },
        "required": ["id", "name", "system_prompt", "model"],
        "additionalProperties": false
      }
    }
  },
  "required": ["version", "agents"],
  "additionalProperties": false,
  "examples": [
    {
      "version": "1.0",
      "agent": {
        "id": "triage-bot",
        "name": "Triage Assistant",
        "system_prompt": "You are a triage specialist.\nClassify issues as BUG/FEATURE/QUESTION/TASK.\nSet priority P0-P3.",
        "model": {
          "anthropic": {
            "name": "claude-3-5-sonnet-20241022",
            "temperature": 1,
            "max_tokens": 4096
          }
        }
      }
    },
    {
      "version": "1.0",
      "agent": {
        "id": "docs-search-agent",
        "name": "Documentation Oracle",
        "description": "Searches documentation to answer questions with precision and context",
        "system_prompt": "You are a Documentation Oracle that helps users find answers in documentation.",
        "model": {
          "anthropic": {
            "name": "claude-sonnet-4-5-20250929",
            "temperature": 0.5,
            "max_tokens": 3000,
            "tool_choice": {
              "type": "auto"
            },
            "tools": [
              {
                "type": "web_search_20250305",
                "name": "web_search",
                "max_uses": 10
              },
              {
                "type": "web_fetch_20250910",
                "name": "web_fetch",
                "max_uses": 20,
                "citations": {
                  "enabled": true
                }
              }
            ]
          }
        }
      }
    },
    {
      "version": "1.0",
      "agent": {
        "id": "linear-assistant",
        "name": "Linear Assistant",
        "description": "Helps manage and query Linear issues using MCP integration",
        "system_prompt": "You are a helpful assistant that can search and retrieve Linear issues.\nUse the available tools to help users find information about their issues.",
        "model": {
          "anthropic": {
            "name": "claude-sonnet-4-5-20250929",
            "temperature": 0.7,
            "max_tokens": 4000,
            "mcp_servers": [
              {
                "type": "url",
                "url": "https://api.sniff.to/mcp/linear",
                "name": "Linear Integration",
                "tool_configuration": {
                  "enabled": true,
                  "allowed_tools": ["get_issue", "search_issues"]
                }
              }
            ]
          }
        }
      }
    }
  ]
}
